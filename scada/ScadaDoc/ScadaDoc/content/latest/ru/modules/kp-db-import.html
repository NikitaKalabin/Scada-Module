<!DOCTYPE html>
<html>
<head>
    <title>Драйвер импорта из БД - Документация Rapid SCADA</title>
    <meta charset="utf-8" />
    <link href="../../../../css/scadadoc.min.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../../../lib/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../js/contents.js"></script>
    <script type="text/javascript" src="../../../../js/scadadoc.js"></script>
</head>
<body>
    <h1>Драйвер импорта из БД</h1>

    <h2>Обзор</h2>
    <p>Драйвер импорта из БД позволяет получать текущие данные из сторонней базы данных, а также записывать информацию в стороннюю БД с помощью команд телеуправления. Данный драйвер входит в дистрибутив Rapid SCADA и отдельная установка драйвера не требуется. Файл библиотеки драйвера - KpDbImport.dll.</p>

    <h2>Конфигурирование</h2>
    <p>Каждый КП, использующий драйвер импорта из БД, содержит один запрос на получение данных и набор команд телеуправления (ТУ) на изменение данных. На одной линии связи может находится один или несколько КП, импортирующих данные.</p>
    <p>Настройка драйвера импорта из БД выполняется с помощью формы свойств КП. Чтобы открыть эту форму, необходимо найти соответствующий КП в настройках Коммуникатора, щёлкнуть на узле КП правой кнопкой мыши и выбрать пункт меню <em>Свойства</em>.</p>

    <p class="sd-article-image">
        <img src="kp-db-import-files/db_import_conn_ru.png" alt="Настройка соединения с БД" /><br />
    </p>

    <p>На странице <em>База данных</em> необходимо задать тип базы данных и указать параметры соеднинения с БД. Если требуется ввести нестандартные параметры соединения, то допускается редактирование строки соединения напрямую.</p>

    <p class="sd-article-image">
        <img src="kp-db-import-files/db_import_query_ru.png" alt="Настройка извлечения данных" /><br />
    </p>

    <p>На странице <em>Извлечение данных</em> указывается SQL-запрос для получения текущих данных из БД. Драйвер автоматически создаёт теги КП на основе списка запрашиваемых столбцов таблицы. Если запрос имеет сложный синтаксис, то может потребоваться указать количество тегов вручную.</p>
    
    <p class="sd-article-image">
        <img src="kp-db-import-files/db_import_cmd_ru.png" alt="Настройка команд телеуправления" /><br />
    </p>

    <p>На странице <em>Команды</em> задаются команды ТУ, поддерживаемые данным КП. Команды обеспечивают передачу информации из Rapid SCADA в базу данных. В SQL-запросе команды доступны переменные cmdVal и cmdNum, которые содержат значение и номер команды соответственно. Для большинства СУБД переменные в запросе имеют префикс <strong>@</strong>, для Oracle обычно используется префикс <strong>:</strong> (двоеточие).</p>
    <p>Допускается создание команды с номером 0, которая будет выполняться по умолчанию. Если номер отправленной команды не найден в списке команд КП, то будет выполнена команда по умолчанию.</p>
</body>
</html>
